<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>probability statistics（概率）</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    .div-con {
      margin: 30px auto;
      text-align: center;
    }
    .div-con .btn {
      padding: 3px 5px;
    }
    .div-con .con {
      margin: 10px auto;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div class="div-con">
    <h1 class="title">probability statistics （概率）</h1>

    <div id="con" class="con">
      <input type="button" value="100次" id="btn">
      <p>一等奖：5/1000， 二等奖：3/100， 三等奖：80/100，纪念奖：谢谢惠顾</p>
      <ul>
        <li>一等奖：<span class="span"></span></li>
        <li>二等奖：<span class="span"></span></li>
        <li>三等奖：<span class="span"></span></li>
        <li>纪念奖：<span class="span"></span></li>
      </ul>
    </div>
  </div>

  <script>
    var btnEl = document.getElementById('btn');
    var allSpanEl = document.getElementsByClassName('span');
    var size = 1000;
    // 设置概率
    var arr1 = [0.005*size, 0.03*size, 0.8*size];
    // 区间，第一个数之前的是1等奖的格式，第一个数和第二个数之间的是2等奖的个数
    var arr2 = [];
    var num = 0;

    btnEl.onclick = function () {
      arr2 = [];
      num = 0;
      // 得到区间
      for(let i=0; i<arr1.length; i++) {
        num += arr1[i];
        arr2.push({iNow: 0, val: num}); [5, 35, 835]
      }
      console.log(arr2);

      // 获取随机次数
      let fre = parseInt(this.value);
      let sum = 0;
      // 生成随机数
      for (let i=0; i<fre; i++) {
        let val = Math.random() * size;
        console.log(val);
        fnCount(val);
      }
      // console.log(arr2);

      // 设置统计数
      for (let i=0; i<allSpanEl.length; i++) {
        if (allSpanEl.length-1 == i) {
          // 最后一项 = 总的 - 前面的
          allSpanEl[i].innerHTML = fre - sum;
        } else {
          allSpanEl[i].innerHTML = arr2[i].iNow;
          // 累加前几次中奖的次数
          sum += arr2[i].iNow;
        }
      }
    }

    // 计数
    function fnCount (val) {
      for (let i=0; i<arr2.length; i++) {
        if (arr2[i].val > val) {
          arr2[i].iNow++;
          break;
        }
      }
    }

  </script>
</body>
</html>